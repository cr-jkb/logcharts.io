(()=>{"use strict";var t={888:(t,e,i)=>{function n(t){if(t){const e=t.split(":"),i=new Date;if(i.setHours(e[0]),i.setMinutes(e[1]),i.setSeconds(e[2]),!isNaN(i.getTime()))return i}}function r(t){if(t){if("No"==t)return 0;if("Yes"==t)return 1;if(!isNaN(t))return parseFloat(t)}}function a(t){let e=document.querySelector(".tooltip"),i=document.querySelector(".tooltip-background"),n=document.querySelector(".tooltip-background-stroke"),r=document.querySelector(".tooltip-time"),a=i.getBoundingClientRect().width+15;e.setAttribute("x",t?-a:15),i.setAttribute("x",t?-a:15),n.setAttribute("x",t?-a:15),r.setAttribute("dx",t?5-a:20)}function o(t,e=null){let i=document.querySelector(".tooltip"),n=document.querySelector(".tooltip-background"),r=document.querySelector(".tooltip-background-stroke"),a=document.querySelector(".tooltip-time");i.setAttribute("y",t?-21-e:-21),n.setAttribute("y",t?-21-e:-21),r.setAttribute("y",t?-21-e:-21),a.setAttribute("dy",t?15-e:15)}function l(t){for(var e,i,n=t.length;0!==n;)i=Math.floor(Math.random()*n),e=t[n-=1],t[n]=t[i],t[i]=e;return t}function c(t,e){let i=document.querySelector(".selector-btn-container"),n=!1;0==i.children.length&&(n=!0);let r=document.createElement("div");r.classList.add("selector-div"),r.style.borderBottom="3px solid "+e;let a=document.createElement("div");a.classList.add("color-picker"),r.appendChild(a);let o=document.createElement("input");o.setAttribute("type","radio"),o.setAttribute("id",t),o.setAttribute("name","selector-btn"),n&&(o.checked=!0),o.classList.add("selector-btn");let l=document.createElement("label");if(l.innerHTML="CPU [°C]",r.appendChild(o),r.appendChild(l),i.appendChild(r),Pickr.create({el:".color-picker",theme:"nano",default:e,defaultRepresentation:"HEX",swatches:["rgba(244, 67, 54, 1)","rgba(233, 30, 99, 1)","rgba(156, 39, 176, 1)","rgba(103, 58, 183, 1)","rgba(63, 81, 181, 1)","rgba(33, 150, 243, 1)","rgba(3, 169, 244, 1)","rgba(0, 188, 212, 1)","rgba(0, 150, 136, 1)","rgba(76, 175, 80, 1)","rgba(139, 195, 74, 1)","rgba(205, 220, 57, 1)","rgba(255, 235, 59, 1)","rgba(255, 193, 7, 1)"],components:{preview:!0,opacity:!0,hue:!0,interaction:{input:!0}}}).on("change",(function(e,i,n){document.querySelector("path#"+t).setAttribute("stroke",e.toHEXA()),r.style.borderBottom="3px solid "+e.toHEXA(),n.applyColor(n._lastColor)})),!n){let e,i=document.createElement("i");for(e of(i.classList.add("fas"),i.classList.add("fa-trash"),i.addEventListener("click",(function(){document.querySelector("path#"+t).remove(),r.remove()})),document.querySelectorAll(".pickr")))e.contains(i)||e.appendChild(i)}}function s(){let t=function(){for(var t=["a","b","c","d","e","f","0","1","2","3","4","5","6","7","8","9"],e="#",i=0;i<6;i++)l(t),e+=t[0];return e}(),e="id"+(new Date).valueOf();c(e,t),u.addNewLine(e,t)}function d(t){this.log=t.parsedLog,this.container=t.container;let e=this.container.clientHeight,i=this.container.clientWidth;this.margin={top:50,right:50,bottom:40,left:60},this.width=i-this.margin.left-this.margin.right,this.height=e-this.margin.top-this.margin.bottom-100,this.brushHeight=80}function h(t){if(null!=document.querySelector(".form-alert"))return void(document.querySelector(".form-alert").innerHTML=t);let e=document.createElement("h3");e.innerHTML=t,e.classList.add("form-alert"),document.querySelector(".third-step").appendChild(e)}let u;function m(t){Papa.parse(t,{header:!0,encoding:"latin3",skipEmptyLines:!0,transformHeader:function(t){return t.replace("�","°")},complete:function(t){!function(t){if(t.includes("Time")&&t.includes("CPU [°C]"))return!0}(t.meta.fields)?h("Please send only logs from HWInfo!"):(function(){let t;document.querySelector(".form-container").remove(),(t=document.querySelector(".loader-wrapper"))&&t.remove(),document.querySelector(".header").remove()}(),function(){document.querySelector("main").classList.remove("aligned");let t=document.createElement("div");t.classList.add("field-container"),document.querySelector("main").appendChild(t);let e=document.createElement("h4");e.innerHTML="FIELDS",e.classList.add("field-container-title"),document.querySelector(".field-container").appendChild(e),t=document.createElement("div"),t.classList.add("btn-container"),document.querySelector(".field-container").appendChild(t),t=document.createElement("div"),t.classList.add("report-container"),document.querySelector("main").appendChild(t),t=document.createElement("div"),t.classList.add("stats-container"),document.querySelector(".report-container").appendChild(t),t=document.createElement("div"),t.classList.add("selector-container"),document.querySelector(".report-container").appendChild(t),t=document.createElement("div"),t.classList.add("selector-btn-container"),document.querySelector(".selector-container").appendChild(t),t=document.createElement("div"),t.classList.add("chart-container"),document.querySelector(".report-container").appendChild(t)}(),function(t){let e,i;for(i of t)!i||i.includes("Time")||i.includes("Date")||(e=document.createElement("button"),e.id=i,e.innerHTML=i,e.classList.add("field-btn"),document.querySelector(".btn-container").appendChild(e));let n=document.getElementById("CPU [°C]");n.focus(),n.scrollIntoView({block:"center"})}(t.meta.fields),document.querySelector(".btn-container").addEventListener("click",(t=>{"field-btn"==t.target.className&&function(t){let e=document.querySelector(".selector-btn:checked");e.parentNode.querySelector("label").innerHTML=t;let i=document.querySelector(".selector-btn:first-of-type");e.id==i.id?(u.updateMainLine(t),function(t,e){let i=t.map((t=>r(t[e]))),n=d3.extent(i),a=d3.mean(i).toFixed(2),o=document.querySelector("#min_value"),l=document.querySelector("#mean"),c=document.querySelector("#max_value");o.children[0].innerHTML=n[0],l.children[0].innerHTML=a,c.children[0].innerHTML=n[1]}(u.log,t)):u.updateLineByField(t,e.id)}(t.target.innerHTML)})),function(){let t=document.createElement("button");t.classList.add("add-selector-btn"),t.classList.add("fas"),t.classList.add("fa-plus-circle"),t.id="add_selector_btn",t.addEventListener("click",s),document.querySelector(".selector-container").appendChild(t)}(),u=new d({container:document.querySelector(".chart-container"),parsedLog:t.data}),u.draw(),function(t){let e,i,n,a=t.map((t=>r(t["CPU [°C]"]))),o=d3.extent(a),l=0;for(;l<3;l++){switch(e=document.createElement("div"),i=document.createElement("h6"),n=document.createElement("h4"),e.classList.add("stats"),i.classList.add("stats-title"),n.classList.add("stats-value"),l){case 0:e.id="min_value",n.innerHTML=o[0],i.innerHTML="Minimum Value";break;case 1:e.id="mean",n.innerHTML=d3.mean(a).toFixed(2),i.innerHTML="Mean";break;case 2:e.id="max_value",n.innerHTML=o[1],i.innerHTML="Maximum Value"}document.querySelector(".stats-container").appendChild(e),e.appendChild(n),e.appendChild(i)}}(t.data))}})}i.d(e,{u:()=>u}),d.prototype.draw=function(){this.chartSVG=d3.select(this.container).append("svg").attr("class","chart-svg").attr("viewBox",`0 0 ${this.width} ${this.height}`),this.contextSVG=d3.select(this.container).append("svg").attr("class","context-svg").attr("viewBox",`0 0 ${this.width} 100`),this.clip=this.chartSVG.append("clipPath").attr("id","line_clip").append("rect").attr("transform",`translate(${this.margin.left}, 0)`).attr("width",this.width-2*this.margin.right-9).attr("height",this.height),this.addScales(),this.addAxes(),this.addGrid(),this.addMainLine(),this.addBrush(),this.addTooltip()},d.prototype.addScales=function(){this.xScale=d3.scaleTime().domain(d3.extent(this.log,(t=>n(t.Time)))).range([this.margin.left,this.width-this.margin.right]),this.yScale=d3.scaleLinear().domain(d3.extent(this.log,(t=>r(t["CPU [°C]"])))).nice().range([this.height-this.margin.bottom,this.margin.top]),this.yContextScale=d3.scaleLinear().domain(d3.extent(this.log,(t=>r(t["CPU [°C]"])))).range([this.brushHeight,this.margin.top])},d.prototype.addAxes=function(){this.xAxis=(t,e=1e3,i=this.xScale,n=this.height,r=this.margin.bottom)=>t.attr("transform",`translate(0, ${n-r})`).transition().duration(e).call(d3.axisBottom(i)).attr("class","x-axis"),this.chartSVG.append("g").call(this.xAxis),this.contextSVG.append("g").call(this.xAxis,1e3,this.xScale,100,20),this.yAxis=t=>t.attr("transform",`translate(${this.margin.left},0)`).transition().duration(1e3).call(d3.axisLeft(this.yScale)).call((t=>t.select(".domain").remove())).attr("class","y-axis"),this.chartSVG.append("g").call(this.yAxis)},d.prototype.addGrid=function(){this.chartSVG.append("g").attr("class","grid").attr("transform",`translate(${this.margin.left}, 0)`).call(d3.axisLeft(this.yScale).tickSize(-this.width+2*this.margin.right).tickFormat("")).call((t=>t.select(".domain").remove()))},d.prototype.addMainLine=function(){let t="id"+(new Date).valueOf();c(t,"#4E7BFF"),this.chartSVG.append("path").datum(this.log).attr("clip-path","url(#line_clip)").attr("fill","none").attr("stroke","#4E7BFF").attr("stroke-width",2).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("class","chart-line").attr("id",t).attr("d",d3.line().defined((t=>void 0!==r(t["CPU [°C]"]))).x((t=>this.xScale(n(t.Time)))).y((t=>this.yScale(r(t["CPU [°C]"]))))),this.contextSVG.append("path").datum(this.log).attr("fill","none").attr("stroke","#4E7BFF").attr("stroke-width",2).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("class","context-line").attr("d",d3.line().defined((t=>void 0!==r(t["CPU [°C]"]))).x((t=>this.xScale(n(t.Time)))).y((t=>this.yContextScale(r(t["CPU [°C]"])))))},d.prototype.addNewLine=function(t,e,i=this.xScale.copy(),a=this.yScale.copy()){this.brushedXScale?i=this.brushedXScale:i.domain(d3.extent(this.log,(t=>n(t.Time)))),a.domain(d3.extent(this.log,(t=>r(t["CPU [°C]"])))).nice(),this.chartSVG.insert("path",".tooltip").datum(this.log).attr("clip-path","url(#line_clip)").attr("fill","none").attr("stroke",e).attr("stroke-width",2).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("class","chart-line").attr("field","CPU [°C]").attr("id",t).attr("d",d3.line().defined((t=>void 0!==r(t["CPU [°C]"]))).x((t=>i(n(t.Time)))).y((t=>a(r(t["CPU [°C]"])))))},d.prototype.updateLineByField=function(t,e,i=this.xScale.copy(),a=this.yScale.copy()){this.brushedXScale?i=this.brushedXScale:i.domain(d3.extent(this.log,(t=>n(t.Time)))),a.domain(d3.extent(this.log,(e=>r(e[t])))).nice(),this.chartSVG.select("#"+e).transition().duration(1e3).attr("field",t).attr("d",d3.line().defined((e=>void 0!==r(e[t]))).x((t=>i(n(t.Time)))).y((e=>a(r(e[t])))))},d.prototype.updateMainLine=function(t){this.brushedXScale=void 0,this.selectedField=t,this.chartSVG.select(".chart-line")._groups[0][0].setAttribute("field",t),this.xScale.domain(d3.extent(this.log,(t=>n(t.Time)))),this.yScale.domain(d3.extent(this.log,(e=>r(e[t])))).nice(),this.yContextScale.domain(d3.extent(this.log,(e=>r(e[t])))),this.chartSVG.select(".x-axis").call(this.xAxis),this.chartSVG.select(".y-axis").transition().duration(1e3).call(this.yAxis),this.chartSVG.select(".grid").attr("transform",`translate(${this.margin.left}, 0)`).call(d3.axisLeft(this.yScale).tickSize(-this.width+2*this.margin.right).tickFormat("")).call((t=>t.select(".domain").remove())),1==this.chartSVG.select(".grid").selectAll(".tick").size()&&this.chartSVG.select(".grid").select(".tick").remove(),this.chartSVG.select(".chart-line").transition().duration(1e3).attr("d",d3.line().defined((e=>void 0!==r(e[t]))).x((t=>this.xScale(n(t.Time)))).y((e=>this.yScale(r(e[t]))))),this.contextSVG.select(".context-line").transition().duration(1e3).attr("d",d3.line().defined((e=>void 0!==r(e[t]))).x((t=>this.xScale(n(t.Time)))).y((e=>this.yContextScale(r(e[t]))))),this.contextSVG.select(".brush").transition().duration(1e3).call(this.brush.move,this.xScale.range()),this.chartSVG.select(".chart-line")._groups[0][0].setAttribute("domain",this.xScale.domain());let e,i=this.yScale.copy();for(e of document.querySelectorAll(".selector-btn"))t=e.parentNode.querySelector("label").innerHTML,i.domain(d3.extent(this.log,(e=>r(e[t])))).nice(),this.chartSVG.select("#"+e.id).transition().duration(1e3).attr("d",d3.line().defined((e=>void 0!==r(e[t]))).x((t=>this.xScale(n(t.Time)))).y((e=>i(r(e[t])))))},d.prototype.addBrush=function(){this.brush=d3.brushX().extent([[this.margin.left,0],[this.width-this.margin.right,this.brushHeight]]).on("brush",(t=>{if(t.sourceEvent){let e=t.selection;this.updateByBrush(e)}})),this.contextSVG.append("g").attr("class","brush").call(this.brush).call(this.brush.move,this.xScale.range())},d.prototype.updateByBrush=function(t,e=this.xScale.copy(),i=this.yScale.copy()){let a,o;for(o of(e.domain([e.invert(t[0]),e.invert(t[1])]),this.brushedXScale=e,this.chartSVG.select(".x-axis").call(this.xAxis,0,e),document.querySelectorAll(".selector-btn")))a=o.parentNode.querySelector("label").innerHTML,i.domain(d3.extent(this.log,(t=>r(t[a])))).nice(),this.chartSVG.select("#"+o.id).attr("d",d3.line().defined((t=>void 0!==r(t[a]))).x((t=>e(n(t.Time)))).y((t=>i(r(t[a])))))},d.prototype.addTooltip=function(){const t=this.chartSVG.append("g").attr("class","tooltip"),e=this.chartSVG.append("line").attr("class","tooltip-line").style("stroke","black").style("stroke-width",2).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",this.height-this.margin.bottom,this.margin.top),i=t.append("circle").attr("class","tooltip-circle").attr("r",5),l=t.append("rect").attr("class","tooltip-background").attr("width",100).attr("height",30).attr("x",15).attr("y",-21),c=t.append("rect").attr("class","tooltip-background-stroke").attr("width",100).attr("height",30).attr("x",15).attr("y",-21),s=t.append("text").attr("class","tooltip-value-container").attr("width",100).attr("height",30).attr("dx",15).attr("y",-15),d=(s.append("tspan").attr("class","tooltip-time").attr("dy",15),this);let h,u=d.yScale;this.chartSVG.on("touchmove mousemove",(function(m){t.selectAll(".tooltip-value").remove(),h=d.brushedXScale?d.brushedXScale:d.xScale;const p=d3.bisector((t=>n(t.Time))).center,g=h.invert(d3.pointer(m,this)[0]),y=p(d.log,g,1),f=d.log[y-1],S=d.log[y];let x=S&&g-n(f.Time)>n(S.Time)-g?S:f,b=document.body.clientWidth-document.querySelector(".chart-svg").getBoundingClientRect().width,v=i.node().getBoundingClientRect(),L=v.left+l.node().getBoundingClientRect().width-b,C=l.node().getBoundingClientRect().width+15,q=!1;L>d.width?(q=!0,a(!0)):(q=!1,a(!1));let k=15*(document.querySelectorAll(".selector-btn").length-1),T=v.bottom+20+k,w=document.querySelector(".domain").getBoundingClientRect().y;T>w?o(!0,T-w+k):o(!1);let E,A,V,G,H=!0;for(G of document.querySelectorAll(".selector-btn")){E=G.parentNode.querySelector("label").innerHTML,H&&(V=E),H=!1,A=E+": "+r(x[E]);let t=q?5-C:20;s.append("tspan").text(A).attr("id",E).attr("class","tooltip-value").attr("x",t).attr("dy",15)}let M=s.node().getBoundingClientRect(),B=M.height+10,P=M.width+10;l.node().setAttribute("height",B),l.node().setAttribute("width",P),c.node().setAttribute("height",B),c.node().setAttribute("width",P),e.attr("transform","translate("+h(n(x.Time))+",0)"),t.attr("transform","translate("+h(n(x.Time))+","+u(r(x[V]))+")"),t.select(".tooltip-time").text(n(x.Time).toLocaleTimeString())})),this.chartSVG.on("mouseover",(function(){t.style("display",null),e.style("display",null)})),this.chartSVG.on("mouseout",(function(){t.style("display","none"),e.style("display","none")}))},document.getElementById("log_input").addEventListener("change",(function(){let t=document.getElementById("log_input").files[0];if(!function(t){if("text/csv"==t.type||"application/vnd.ms-excel"==t.type||!t.type)return!0}(t))return h("Please upload only CSV files!");m(t)})),document.getElementById("example").addEventListener("click",(async function(){(function(){let t=document.createElement("div");t.classList.add("loader-wrapper");let e=document.createElement("div");e.classList.add("loader"),t.appendChild(e),document.querySelector("main").appendChild(t)})(),m(await async function(){return await fetch("./assets/example.CSV").then((t=>t.text()))}())}))}},e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i(888)})();